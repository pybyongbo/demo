<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <title>微博输入框测试效果!</title>
    <link rel="stylesheet" type="text/css" href="../../../lib/bootstrap.min.css" media="screen">
    <script type="text/javascript" src="../../../lib/jquery-1.10.2.min.js"></script>
    <style type="text/css" media="screen">
    .demo1{width:780px;margin:50px auto;}
    .demo1 .form-horizontal label{width:90px;text-align:right;float:left;}
    input.form-control{width:240px;float:left;}
    span.info{line-height:32px;color:red;margin-left:10px;}
    #btn{width:180px;float: left;}
    code img{margin-left:85px;}
    .popover.right{left:320px;}
    .popover-content{color:red;}

    textarea{border-radius:5px;border:1px solid #dedede;}

    </style>
</head>

<body>
    <div class="demo1 tc">
        <form class="form-horizontal user-input" id="form" role="form">
         		

             <div class="form-group">
                <label for="msg" class="col-sm-2 control-label">备注</label>
                <div class="col-sm-10">
                    <textarea class="from-control require" name="content" id="msg" placeholder="备注" cols="47" rows="6" ></textarea>
                </div>
            </div>

            
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button id="btn" type="button" class="btn btn-primary btn-block">提 交</button>
                </div>
            </div>

        </form>


         
    </div>
</body>

</html>
<script type="text/javascript">
(function() {

//通过class获取元素.
function getByClass(oParent, sClass) {
    var aEle = oParent.getElementsByTagName('*');

    var aResult = [];
    var re = new RegExp('\\b' + sClass + '\\b', 'i');
    var i = 0;

    for (var i = 0; i < aEle.length; i++) {

        if (re.test(aEle[i].className)) {

            aResult.push(aEle[i]);

        }
    }

    return aResult;
}





var btn = document.getElementById('btn');

btn.onclick = function(){

	var formbd = document.getElementById('form');

	// var msg = $("#msg");
	var msg_val = $("#msg").val();
	// window.console.log(msg_val!='' && msg_val.length>50);
		
	if(msg_val=='') {
		error('msg',3);

	} else if(msg_val!='' && msg_val.length>50) {
		error('msg',3);
	} else {
		alert('输入合法');
	}

}

}());

//设置css样式,读取css样式方法

var msg = document.getElementById('msg');
css(msg,{'background-color':'red','font-size':'30px'});
css2(msg,'background-color','green');
function css(obj, attr, value)
{
	switch (arguments.length)
	{
		case 2:
			if(typeof arguments[1] == "object")
			{	
				for (var i in attr) i == "opacity" ? (obj.style["filter"] = "alpha(opacity=" + attr[i] + ")", obj.style[i] = attr[i] / 100) : obj.style[i] = attr[i];
			}
			else
			{	
				return obj.currentStyle ? obj.currentStyle[attr] : getComputedStyle(obj,null)[attr]
			}
			break;
		case 3:
			attr == "opacity" ? (obj.style["filter"] = "alpha(opacity=" + value + ")", obj.style[attr] = value / 100) : obj.style[attr] = value;
			break;
	}
};



function css2(obj,name,value){

	if(arguments.length==2){
		return arguments[0].style[arguments[1]];
	} else if(arguments.length == 3) {
		arguments[0].style[arguments[1]] = arguments[2];
	}
}
function normal(id,times) {
	var obj = document.getElementById(id);
	// var obj = $("#"+id);
	css(obj,{'background-color':'#fff'});
	// obj.css("background-color","#fff");
	if(times<0) {
		return;
	}
	times = times-1;
	setTimeout("error('"+id+"',"+times+")",250);

}

function error(id,times) {

	var obj = document.getElementById(id);
	// var obj = $("#"+id);
	css(obj,{'background-color':'#FFBBBB'});
	// obj.css("background-color","#F6CECE");
	times = times-1;
	setTimeout("normal('"+id+"',"+times+")",250);

}

</script>
